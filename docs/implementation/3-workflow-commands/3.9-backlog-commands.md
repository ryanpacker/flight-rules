# 3.9 Backlog Commands

Commands for capturing, clarifying, reviewing, and promoting half-formed ideas before they're ready for the PRD or implementation specs.

## Goals

- Minimize friction for idea capture (PRD Goal 11)
- Provide a path from raw idea → clarified idea → formal feature
- Keep the backlog human-driven, not agent-integrated

## Constraints

- Tags and priority are always optional — never required for capture
- Backlog files live in `docs/backlog/` (user-owned, like all docs/)
- Promoted items move to `docs/backlog/archive/` with a link to where they landed
- The `init` and `upgrade` commands should create `docs/backlog/` if it doesn't exist

## Dependencies

- **Requires**: Existing command infrastructure (payload/commands/)
- **Enables**: Smoother `/feature.add` workflow via `/backlog.promote`

---

## 3.9.1. `/backlog.add` — Quick Idea Capture

**Goal**: Capture an idea with minimum friction.

**Approach**:
- One-shot mode (primary): `/backlog.add dark mode for settings page`
- Conversational fallback if invoked without arguments
- Creates a file in `docs/backlog/` with kebab-case name derived from title
- Template includes: title, captured date, status (Raw), idea description
- Optional fields in template: tags, priority (both blank by default)

**File template**:
```markdown
# [Title]

**Captured**: [date]
**Status**: Raw
**Tags**:
**Priority**:

## Idea

[User's description]
```

**Acceptance Criteria**:
- Running `/backlog.add some idea here` creates a file in under 2 seconds of agent time
- File is created with correct template and the idea text populated
- No required fields beyond the description
- Duplicate detection: warn if a similarly-named file exists

**Status**: ✅ Complete

---

## 3.9.2. `/backlog.clarify` — Interactive Idea Refinement

**Goal**: Flesh out a raw idea through conversation.

**Approach**:
- Takes a backlog item identifier (filename or title fragment)
- Reads the current file, then asks clarifying questions
- Updates the file with additional sections: Problem, Possible Approach, Open Questions, Notes
- Changes status from Raw → Clarified

**Acceptance Criteria**:
- Agent can find and open a backlog item by partial name match
- Conversation adds structured detail to the file
- Status updates to Clarified when done
- Original idea text is preserved, not overwritten

**Status**: ✅ Complete

---

## 3.9.3. `/backlog.list` — Backlog Overview

**Goal**: Show a summary of all backlog items.

**Approach**:
- Reads all files in `docs/backlog/` (excluding archive/)
- Presents a table or list: title, status, tags, priority, captured date
- Optional filtering by status, tag, or priority
- Shows count summary (e.g., "12 items: 8 Raw, 3 Clarified, 1 Promoted")

**Acceptance Criteria**:
- Lists all non-archived backlog items
- Sorted by capture date (newest first) by default
- Shows status, tags, and priority when present
- Handles empty backlog gracefully

**Status**: ✅ Complete

---

## 3.9.4. `/backlog.promote` — Graduate Idea to Feature

**Goal**: Move a clarified idea into the formal PRD/implementation workflow.

**Approach**:
- Takes a backlog item identifier
- Reads the clarified idea and presents it as context
- Feeds the idea description into `/feature.add` as input
- On completion, moves the backlog file to `docs/backlog/archive/`
- Updates status to Promoted and adds a link to where it landed (PRD goal number, implementation area)

**Acceptance Criteria**:
- Reads a backlog item and launches the feature.add workflow with it as context
- Original backlog file moves to `docs/backlog/archive/`
- Archived file includes a reference to the resulting PRD goal / implementation spec
- Works on both Raw and Clarified items (but recommends clarifying first for Raw items)

**Status**: ✅ Complete
