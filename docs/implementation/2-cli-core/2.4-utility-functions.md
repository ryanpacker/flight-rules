# 2.4 Utility Functions

Shared utilities used across CLI commands.

## Goals

- Provide reusable file operations
- Handle manifest reading/writing
- Manage interactive prompts with @clack/prompts

## Location

- `src/utils/files.ts` — File system operations
- `src/utils/interactive.ts` — TTY detection and prompts

---

## 2.4.1. File Operations

**Goal**: Safe file system operations for payload and docs

**Approach**:
- `copyDirectory()` — Recursive directory copy
- `fileExists()` — Check file existence
- `readManifest()` / `writeManifest()` — Manifest JSON handling
- `getPayloadPath()` — Locate payload in npm package

**Acceptance Criteria**:
- All operations handle errors gracefully
- Manifest functions return null for missing files
- Payload location works for both local dev and npm install

**Status**: ✅ Complete

---

## 2.4.2. Interactive Mode Detection

**Goal**: Detect whether running in interactive terminal

**Approach**:
- Check `process.stdout.isTTY`
- Export `isInteractive()` function
- Commands use this to adjust behavior

**Acceptance Criteria**:
- Returns true for terminal sessions
- Returns false for CI, piped output, agent invocation
- All commands respect this flag

**Status**: ✅ Complete

---

## 2.4.3. Prompt Utilities

**Goal**: Consistent prompts using @clack/prompts

**Approach**:
- Wrap @clack/prompts for consistent styling
- Handle prompt cancellation gracefully
- Provide intro/outro messaging

**Acceptance Criteria**:
- Prompts have consistent look and feel
- Cancellation exits cleanly
- Non-interactive mode skips prompts

**Status**: ✅ Complete
