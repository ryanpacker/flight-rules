# Session Log: 2024-12-29

## Session Goals

- Move `docs/` directory from inside `.flight-rules/` to project root in destination projects
- Add conflict handling for existing docs directories
- Remove redundant "replaced on upgrade" language from documentation

## Related Specs

- This was an architectural refactor, not tied to specific task group specs

## Summary

Successfully moved user-owned project documentation from `.flight-rules/docs/` to `./docs/` in projects that use Flight Rules. The `.flight-rules/` directory now contains only framework files, while project content lives at the root where it's more visible and discoverable.

## Implementation Details

### Payload Structure
- Deleted `payload/docs/` directory (was empty subdirectories)
- Docs are now created at project root during `flight-rules init`

### CLI Changes (`src/commands/`)
- **init.ts**: Changed docsDir to `join(cwd, 'docs')`, added conflict handling with skip/overwrite/cancel options, created `copyDocsFromTemplates()` helper
- **upgrade.ts**: Simplified messaging to emphasize `.flight-rules/` vs `docs/` distinction
- **adapter.ts**: Updated Quick Reference table to use `docs/` paths

### Documentation Updates
- **payload/AGENTS.md**: All paths updated, Section 2 restructured to describe the two-location model
- **payload/commands/*.md**: All paths updated
- **payload/prompts/**/*.md**: All paths updated
- **README.md**: New structure diagram, simplified upgrade framing

## Key Decisions

1. **Docs at project root**: Project documentation should be visible and discoverable, not hidden inside a dot-directory
2. **Cleaner upgrade semantics**: The distinction is now at the top level (`.flight-rules/` vs `docs/`) rather than between subdirectories
3. **Conflict handling**: Since `docs/` is common, init must handle existing directories gracefully

## Challenges & Solutions

- **Challenge**: Many files referenced `.flight-rules/docs/` paths
- **Solution**: Systematic grep to find all 53 references, then updated each file

## Code Areas Touched

- `payload/AGENTS.md`
- `payload/commands/start-coding-session.md`
- `payload/commands/end-coding-session.md`
- `payload/prompts/implementation/plan-review.md`
- `payload/prompts/implementation/README.md`
- `payload/prompts/prd/README.md`
- `payload/doc-templates/session-log.md`
- `src/commands/init.ts`
- `src/commands/upgrade.ts`
- `src/commands/adapter.ts`
- `README.md`
- `dist/` (rebuilt)

## Spec Updates Needed

- None (this was an architectural decision, not spec-driven)

## Next Steps

1. **Cursor command detection**: Add configuration to the Cursor adapter so that commands in `.flight-rules/commands/` are automatically discovered by Cursor
2. **Command vs Prompt rationale**: Establish and document clearer criteria for what belongs in `commands/` vs `prompts/`

## Learnings

- Moving docs to project root makes the upgrade story cleaner: everything in `.flight-rules/` can be replaced, everything in `docs/` is yours
- The "replaced on upgrade" distinction was confusing when applied to subdirectories; it's cleaner when applied at the top level

